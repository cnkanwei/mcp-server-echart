# mcp-server-echart

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

ä¸€ä¸ªåŸºäº `mcp-go` æ¡†æ¶æ„å»ºçš„ Go æœåŠ¡ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªèƒ½åŠ¨æ€ç”Ÿæˆ ECharts å›¾è¡¨é¡µé¢çš„å·¥å…·ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **åŠ¨æ€å›¾è¡¨ç”Ÿæˆ**ï¼šé€šè¿‡è°ƒç”¨å·¥å…·ï¼Œä¼ å…¥ ECharts çš„ JSON é…ç½®ï¼Œå³å¯ç”Ÿæˆä¸€ä¸ªç‹¬ç«‹çš„ HTML å›¾è¡¨é¡µé¢ã€‚
- **é«˜åº¦å¯é…ç½®**ï¼šæ”¯æŒè‡ªå®šä¹‰å›¾è¡¨çš„æ ‡é¢˜ã€å®½åº¦å’Œé«˜åº¦ã€‚
- **ç°ä»£åŒ–é¡µé¢**ï¼šç”Ÿæˆçš„å›¾è¡¨é¡µé¢æ‹¥æœ‰ä¸€ä¸ªå¹²å‡€ã€ç°ä»£åŒ–çš„å¤–è§‚ã€‚
- **Docker æ”¯æŒ**ï¼šæä¾› `Dockerfile`ï¼Œå¯ä»¥è½»æ¾æ„å»ºè½»é‡ã€å¯ç§»æ¤çš„ Docker é•œåƒã€‚
- **é…ç½®çµæ´»**ï¼šé€šè¿‡ç¯å¢ƒå˜é‡æˆ– `.env` æ–‡ä»¶è¿›è¡Œé…ç½®ï¼Œè½»æ¾é€‚é…ä¸åŒç¯å¢ƒã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å‡†å¤‡å·¥ä½œ

- [Go](https://golang.org/) (ç‰ˆæœ¬ 1.21 æˆ–æ›´é«˜)
- [Docker](https://www.docker.com/) (å¯é€‰ï¼Œç”¨äºå®¹å™¨åŒ–éƒ¨ç½²)

### 2. å…‹éš†ä¸é…ç½®

å…‹éš†æœ¬ä»“åº“åˆ°æ‚¨çš„æœ¬åœ°ï¼š
```bash
git clone https://github.com/cnkanwei/mcp-server-echart.git
cd mcp-server-echart
```

å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿ï¼Œå¹¶æ ¹æ®éœ€è¦è¿›è¡Œä¿®æ”¹ï¼š
```bash
cp .env.example .env
```

`.env` æ–‡ä»¶åŒ…å«ä»¥ä¸‹é…ç½®é¡¹ï¼š

- `PORT`: æœåŠ¡ç›‘å¬çš„ç«¯å£ (é»˜è®¤: `8989`)
- `PUBLIC_URL`: å¯¹å¤–æš´éœ²çš„ URL æ ¹è·¯å¾„ (ä¾‹å¦‚ `http://localhost:8989` æˆ– `https://your.domain.com`)
- `LOG_LEVEL`: æ—¥å¿—çº§åˆ« (ä¾‹å¦‚ `info`, `debug`)
- `STATIC_DIR`: ç”Ÿæˆçš„é™æ€ HTML æ–‡ä»¶å­˜æ”¾çš„ç›®å½• (é»˜è®¤: `static`)

### 3. å®‰è£…ä¾èµ–

```bash
go mod tidy
```

---

## ğŸ“¦ å¦‚ä½•è¿è¡Œ

### åœ¨æœ¬åœ°è¿è¡Œ

```bash
go run main.go
```

æœåŠ¡å¯åŠ¨åï¼Œä¼šç›‘å¬åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®çš„ `PORT` ç«¯å£ï¼ˆé»˜è®¤ä¸º 8989ï¼‰ã€‚

### ä½¿ç”¨ Docker è¿è¡Œ

1.  **æ„å»º Docker é•œåƒ:**
    ```bash
    docker build -t mcp-server-echart .
    ```

2.  **è¿è¡Œ Docker å®¹å™¨:**
    ```bash
    # åŸºç¡€è¿è¡Œ
    docker run -p 8989:8989 -d --name my-echart-server mcp-server-echart

    # è‡ªå®šä¹‰ç«¯å£å’Œå¯¹å¤– URL
    docker run -p 9090:9090 \
      -e PORT=9090 \
      -e PUBLIC_URL="https://my.domain.com" \
      -d --name my-echart-server mcp-server-echart
    ```

---

## ğŸ› ï¸ å·¥å…· (Tool) API

æœ¬æœåŠ¡æä¾›äº†ä¸€ä¸ªåä¸º `generate_echarts_page` çš„å·¥å…·ã€‚

### å‚æ•°

- `title` (string, **å¿…éœ€**): å›¾è¡¨é¡µé¢çš„æ ‡é¢˜ã€‚
- `inputSchema` (object, **å¿…éœ€**): ECharts çš„ JSON é…ç½®å¯¹è±¡ã€‚
- `width` (number, *å¯é€‰*): å›¾è¡¨çš„å®½åº¦ï¼ˆåƒç´ ï¼‰ï¼Œé»˜è®¤ 800ã€‚
- `height` (number, *å¯é€‰*): å›¾è¡¨çš„é«˜åº¦ï¼ˆåƒç´ ï¼‰ï¼Œé»˜è®¤ 600ã€‚

### è¿”å›å€¼

æˆåŠŸè°ƒç”¨åï¼Œå·¥å…·ä¼šè¿”å›ä¸€ä¸ª URLï¼ŒæŒ‡å‘æ–°ç”Ÿæˆçš„å›¾è¡¨é¡µé¢ã€‚

---

## ğŸ’» å¦‚ä½•ä½¿ç”¨

æœ¬æœåŠ¡å¯ä»¥é€šè¿‡ä»»ä½•æ”¯æŒ Server-Sent Events (SSE) çš„ MCP å®¢æˆ·ç«¯è¿›è¡Œè°ƒç”¨ã€‚

### å®¢æˆ·ç«¯é…ç½®

å¦‚æœæ‚¨ä½¿ç”¨çš„ MCP å®¢æˆ·ç«¯æ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œæ‚¨å¯ä»¥æ·»åŠ å¦‚ä¸‹é…ç½®æ¥è¿æ¥åˆ°æœ¬æœåŠ¡ã€‚

è¯·å°† `mcp-server-echart` æ·»åŠ åˆ°æ‚¨çš„å®¢æˆ·ç«¯é…ç½®ä¸­ï¼Œå¹¶å°† URL æŒ‡å‘æœ¬æœåŠ¡çš„ç›‘å¬åœ°å€ï¼ˆé»˜è®¤ä¸º `http://localhost:8989/sse`ï¼‰ã€‚

**ç¤ºä¾‹é…ç½® (`client-config.json`):**
```json
{
  "mcpServers": {
    "mcp-server-echart": {
      "url": "http://localhost:8989/sse"
    }
  }
}
```

**å¦ä¸€ä¸ªç¤ºä¾‹ (ä¾‹å¦‚ï¼Œç”¨äºæµè§ˆå™¨ç¯å¢ƒ):**
```json
{
  "mcpServers": {
    "browser-use-mcp-server": {
      "url": "http://localhost:8000/sse"
    }
  }
}
```

> **æ³¨æ„**:
> - URL åº”ä¸æ‚¨åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®çš„ `PORT` å’Œ `PUBLIC_URL` ä¿æŒä¸€è‡´ã€‚
> - `mcp-go` å·¥å…·è°ƒç”¨çš„é»˜è®¤ç«¯ç‚¹æ˜¯ `/sse`ï¼Œè€Œä¸æ˜¯ `/`ã€‚

### å®¢æˆ·ç«¯é…ç½® (é€šè¿‡ Docker å‘½ä»¤)

å¦‚æœæ‚¨çš„ MCP å®¢æˆ·ç«¯æ”¯æŒé€šè¿‡å‘½ä»¤å¯åŠ¨æœåŠ¡ï¼Œæ‚¨ä¹Ÿå¯ä»¥é…ç½®å®ƒæ¥ç›´æ¥è¿è¡Œ Docker Hub ä¸Šçš„é•œåƒã€‚è¿™ä¼šå°†æœåŠ¡ä½œä¸ºä¸€ä¸ªå­è¿›ç¨‹æ¥ç®¡ç†ï¼Œå®¢æˆ·ç«¯é€šè¿‡æ ‡å‡†è¾“å…¥/è¾“å‡º (stdin/stdout) ä¸å…¶é€šä¿¡ã€‚

è¿™å¯¹äºæœ¬åœ°å¼€å‘æˆ–å°†æœåŠ¡åˆ†å‘ç»™ä»–äººä½¿ç”¨éå¸¸æ–¹ä¾¿ã€‚

**ç¤ºä¾‹é…ç½® (`client-config.json`):**
```json
{
  "mcpServers": {
    "mcp-server-echart-docker": {
      "command": "docker",
      "args": [
        "run",
        "-i",
        "--rm",
        "-p",
        "8989:8989",
        "-e",
        "PORT=8989",
        "-e",
        "PUBLIC_URL=http://localhost:8989",
        "cnkanwei/mcp-server-echart:latest"
      ]
    }
  }
}
```
> **æ³¨æ„**:
> - `-p 8989:8989` å°†å®¹å™¨çš„ 8989 ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„ 8989 ç«¯å£ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥ä»æµè§ˆå™¨è®¿é—®ç”Ÿæˆçš„å›¾è¡¨ã€‚
> - `cnkanwei/mcp-server-echart:latest` æ˜¯å‘å¸ƒåœ¨ Docker Hub ä¸Šçš„å…¬å…±é•œåƒã€‚

---

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [MIT License](LICENSE) å¼€æºã€‚